openapi: 3.0.0
info:
  version: "1"
  title: "ShippingMethods"
  description: "Generated by Manifests generator v1.5.3. The service provides methods for obtaining possible delivery methods according to the specified parameters"
externalDocs:
  url: https://github.com/rollun-com/service-howtobay
servers:
  - url: http://carriers/openapi/ShippingMethods/v1
  - url: http://host.docker.internal:8080/openapi/ShippingMethods/v1
  - url: http://localhost:8080/openapi/ShippingMethods/v1
tags:
  - name: Shipping
    description: "Everything about shipping methods."
paths:
  /shipping:
    post:
      tags:
        - Shipping
      summary: "Getting Shipping Methods"
      description: "Returns possible shipping methods with prices, sender, and delivery time."
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ShippingInfo'
      responses:
        "200":
          description: "Successful operation"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ShippingResult'
        "500":
          description: "Internal error"
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResult'
components:
  schemas:
    ErrorResult:
      type: object
      properties:
        messages:
          type: array
          items:
            $ref: "#/components/schemas/Message"
      description: "Message field is not required"
    Message:
      type: object
      properties:
        level:
          type: string
          enum:
            - emergency
            - alert
            - critical
            - error
            - warning
            - notice
            - info
            - debug
          description: "Message level (like in a logger)"
        type:
          type: string
          enum:
            - UNDEFINED
            - LOGGER_MESSAGE
          description: "Type of the message"
        text:
          type: string
          description: "Message describing what went wrong"
    SuccessResult:
      allOf:
        - $ref: '#/components/schemas/ErrorResult'
      type: object
      properties:
        data:
          type: object
    ShippingResult:
      allOf:
        - $ref: '#/components/schemas/SuccessResult'
      type: object
      properties:
        data:
          $ref: '#/components/schemas/ShippingResultItem'
    ShippingResultItem:
      type: array
      description: "Found delivery methods"
      items:
        $ref: '#/components/schemas/ShippingResponse'
    ShippingInfo:
      type: object
      required:
        - zipTo
        - weight
        - width
        - length
        - height
      properties:
        zipTo:
          type: string
          example: "78228"
        weight:
          type: number
          example: 1.0
        width:
          type: number
          example: 2.0
        length:
          type: number
          example: 3.5
        height:
          type: number
          example: 4.0
        senders:
          type: array
          nullable: true
          items:
            type: string
            example: pu_fast_ds
            description:  au_ds, rm_ds, tft_ds, pu_fast_ds, pu_short_delay_ds, pu_long_delay_ds, wps_ds, pickup_ut, pickup_cn
        isDangerous:
          description: "Whether the package contains hazardous materials. It is necessary to determine the possibility of sending by air."
          type: boolean
          example: false
          nullable: true
        isTire:
          description: "Flag affects the validator"
          type: boolean
          example: false
          nullable: true
        # RM
        rmCategory:
          description: "Category for RM, affects the price"
          type: string
          example: "Filters"
          nullable: true
        rmIsKit:
          description: "IsKit for RM, affects the price"
          type: boolean
          example: false
          nullable: true
        rmDropShipShippingPrice:
          description: "Price for shipping from RM"
          type: number
          example: 10.0
          nullable: true
        rmFee:
          description: "A fee of RM, affects the price"
          type: number
          example: 10.2
          nullable: true
        rmIsOversize:
          description: "Flag IsOversize for RM, affects the price"
          type: string
          enum:
            - Y
            - N
          example: Y
          nullable: true
        # AU
        auIsFirstClass:
          description: "If possible, then send a parcel First Class"
          type: string
          enum:
            - Y
            - N
          example: Y
          nullable: true
        auFlatRateGroup:
          description: "Flag affects the price"
          type: string
          example: ATV25
          nullable: true
        auLargePackageSurcharge:
          description: "Flag affects the price"
          type: number
          example: 10.2
          nullable: true
        trWidth:
          description: "A flag that matches the width, but may be different. Affects the price"
          type: number
          example: 3.1
          nullable: true
        trHeight:
          description: "A flag that matches the height, but may be different. Affects the price"
          type: number
          example: 3.1
          nullable: true
        trLength:
          description: "A flag that matches the length, but may be different. Affects the price"
          type: number
          example: 3.1
          nullable: true
        trSubcategory:
          description: "Flag affects the price"
          type: string
          example: "Offroad Tires"
          nullable: true
        trNewCategory:
          description: "Flag affects the price"
          type: string
          example: "TIRES"
          nullable: true
        trNewSubCategory:
          description: "Flag affects the price"
          type: string
          example: "KITS"
          nullable: true
        trFee:
          description: "Flag affects the price"
          type: number
          example: 1.3
          nullable: true
        trIsOversize:
          description: "Flag affects the price"
          type: string
          enum:
            - "1"
            - "2"
            - "3"
          example: "1"
          nullable: true
        puCommodityCode:
          description: "Commodity Code for PU affects the price"
          type: string
          example: "0319"
          nullable: true
        # WPS
        wpsCategory:
          description: "Wps Category. Tubes, Tires, Wheels"
          type: string
          example: "Tubes"
          nullable: true
        wpsDropShipFee:
          description: "Shipping Price. Enum - FR, 18, 12, 35.."
          type: string
          example: "9.75"
          nullable: true
    ShippingResponse:
      type: object
      required:
        - deliverySender
        - shippingMethodId
        - shippingMethodName
        - trackNumberDate
        - cost
      properties:
        deliverySender:
          type: string
          example: "wps_ds"
        shippingMethodId:
          type: string
          example: "PU-PickUp-Usps-PM-FR-BgBox"
        shippingMethodName:
          type: string
          example: "Priority Mail Large Flat Rate Board Game Box"
        cost:
          type: number
          example: 5.84
          nullable: true
        trackNumberDate:
          type: string
          example: "2020-01-30T09:00:00Z"
        shippingArriveDate:
          type: string
          nullable: true
          example: "2020-02-03T09:00:00Z"
        shippingSendDate:
          type: string
          example: "2020-02-03T09:00:00Z"
        carrier:
          type: string
          enum:
            - Usps
            - Fedex
            - Ups
          example: Fedex
          nullable: true
